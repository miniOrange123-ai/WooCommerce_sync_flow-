<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WooCommerce Sync Flow Comparison</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            background: transparent;
            font-size: 1rem;
            font-weight: 500;
            color: #6c757d;
            position: relative;
        }

        .tab:hover {
            background: #e9ecef;
            color: #495057;
        }

        .tab.active {
            background: white;
            color: #007bff;
            border-bottom: 3px solid #007bff;
        }

        .tab-content {
            display: none;
            padding: 40px;
            min-height: 600px;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .content-header h2 {
            font-size: 2rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .content-header p {
            font-size: 1.1rem;
            color: #6c757d;
            max-width: 600px;
            margin: 0 auto;
        }

        .diagram-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .diagram-container:hover {
            border-color: #007bff;
            box-shadow: 0 10px 25px rgba(0, 123, 255, 0.1);
        }

        .diagram-container img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .diagram-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .comparison-item {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #e9ecef;
        }

        .comparison-item h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .comparison-item ul {
            list-style: none;
            padding: 0;
        }

        .comparison-item li {
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
            color: #495057;
        }

        .comparison-item li:last-child {
            border-bottom: none;
        }

        .comparison-item li:before {
            content: "•";
            color: #007bff;
            font-weight: bold;
            margin-right: 10px;
        }

        .key-differences {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .key-differences h3 {
            margin-bottom: 20px;
            font-size: 1.4rem;
        }

        .key-differences ul {
            list-style: none;
            padding: 0;
        }

        .key-differences li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 1.1rem;
        }

        .key-differences li:last-child {
            border-bottom: none;
        }

        .key-differences li:before {
            content: "→";
            margin-right: 10px;
            font-weight: bold;
        }

        .flow-description {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .flow-description h4 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .flow-description p {
            color: #424242;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tab-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>miniOrange WooCommerce Sync Flow</h1>
            <p>Comprehensive analysis of old vs new synchronization approaches</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('basic-old')">Basic Old Sync</button>
            <button class="tab" onclick="showTab('basic-new')">Basic New Sync</button>
            <button class="tab" onclick="showTab('old-flow')">Old Sync Flow</button>
            <button class="tab" onclick="showTab('new-flow')">New Sync Flow</button>
            <button class="tab" onclick="showTab('old-backup')">Old Backup Flow</button>
            <button class="tab" onclick="showTab('new-backup')">New Backup Flow</button>
            <button class="tab" onclick="showTab('comparison')">Key Differences</button>
        </div>

        <!-- Basic Old Sync Tab -->
        <div id="basic-old" class="tab-content active">
            <div class="content-header">
                <h2>Basic Old Sync Flow</h2>
                <p>Connection-centric approach requiring manual sync for each API connection</p>
            </div>
            
            <div class="flow-description">
                <h4>Overview</h4>
                <p>In the old sync flow, each API is treated as a separate connection that must be manually synchronized individually. Users need to start sync for each connection separately to sync all products and their information. This requires manual scheduling and management of each connection's sync process.</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">Connection Sync Sequence Diagram</div>
                <img src="basic old flow.png" alt="Basic Old Sync Flow Diagram">
            </div>

            <div class="flow-description">
                <h4>Key Characteristics</h4>
                <p>• <strong>Connection-centric:</strong> Each API is a separate connection<br>
                • <strong>Manual Management:</strong> Must start sync for each connection individually<br>
                • <strong>Separate Scheduling:</strong> Each connection requires its own sync scheduling<br>
                • <strong>Isolated Processing:</strong> No relationship between connections<br>
                • <strong>User-intensive:</strong> Requires manual intervention for each connection</p>
            </div>
        </div>

        <!-- Basic New Sync Tab -->
        <div id="basic-new" class="tab-content">
            <div class="content-header">
                <h2>Basic New Sync Flow</h2>
                <p>Supplier-centric approach with automatic connection management</p>
            </div>
            
            <div class="flow-description">
                <h4>Overview</h4>
                <p>The new sync flow introduces a supplier-centric architecture where you create one supplier and add all related connections under that supplier. Instead of manually syncing each connection, you simply start the supplier sync, and the system automatically handles running sync for all related connections one by one based on priority.</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">Supplier Sync Sequence Diagram</div>
                <img src="basic new flow.png" alt="Basic New Sync Flow Diagram">
            </div>

            <div class="flow-description">
                <h4>Key Characteristics</h4>
                <p>• <strong>Supplier-centric:</strong> One supplier contains multiple related connections<br>
                • <strong>Automatic Management:</strong> Start supplier sync, system handles connections internally<br>
                • <strong>Priority-based:</strong> Connections processed in priority order<br>
                • <strong>Unified Scheduling:</strong> Single sync operation for entire supplier<br>
                • <strong>User-friendly:</strong> One-click sync for all related connections</p>
            </div>
        </div>

        <!-- Old Sync Flow Tab -->
        <div id="old-flow" class="tab-content">
            <div class="content-header">
                <h2>Detailed Old Sync Flow</h2>
                <p>Manual connection-by-connection synchronization process</p>
            </div>
            
            <div class="flow-description">
                <h4>Overview</h4>
                <p>The detailed old sync flow demonstrates the complex manual process required when each API connection must be synchronized separately. Users must initiate, schedule, and monitor each connection individually, making it time-consuming and error-prone for suppliers with multiple connections.</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">WooCommerce Product Sync - Function Call Flow</div>
                <img src="old sync flow .png" alt="Detailed Old Sync Flow Diagram">
            </div>

            <div class="flow-description">
                <h4>Process Flow</h4>
                <p>• <strong>Manual Initiation:</strong> User must start sync for each connection separately<br>
                • <strong>Individual Scheduling:</strong> Each connection requires separate cron scheduling<br>
                • <strong>Isolated Processing:</strong> No coordination between connections<br>
                • <strong>API calls:</strong> Retrieve product data for each connection independently<br>
                • <strong>Product Processing:</strong> Handle products for each connection separately<br>
                • <strong>WooCommerce Integration:</strong> Create/update products per connection<br>
                • <strong>Separate Monitoring:</strong> Track progress for each connection individually</p>
            </div>
        </div>

        <!-- New Sync Flow Tab -->
        <div id="new-flow" class="tab-content">
            <div class="content-header">
                <h2>Detailed New Sync Flow</h2>
                <p>Automated supplier-level synchronization with internal connection management</p>
            </div>
            
            <div class="flow-description">
                <h4>Overview</h4>
                <p>The detailed new sync flow shows how the system automatically manages multiple connections under a single supplier. Users only need to start the supplier sync, and the system internally handles the coordination, priority management, and sequential processing of all related connections.</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">WooCommerce Supplier Sync Flow - Priority Based Connection Sync</div>
                <img src="new sync  flow .png" alt="Detailed New Sync Flow Diagram">
            </div>

            <div class="flow-description">
                <h4>Process Flow</h4>
                <p>• <strong>Single Initiation:</strong> User starts supplier sync once<br>
                • <strong>Automatic Coordination:</strong> System manages all connections internally<br>
                • <strong>Priority-based Processing:</strong> Connections processed in priority order<br>
                • <strong>Sequential Execution:</strong> One connection completes before next starts<br>
                • <strong>Unified Monitoring:</strong> Track progress at supplier level<br>
                • <strong>Enhanced Recovery:</strong> Better error handling and backup mechanisms<br>
                • <strong>Comprehensive Hooks:</strong> More customization points throughout process</p>
            </div>
        </div>

        <!-- Old Backup Flow Tab -->
        <div id="old-backup" class="tab-content">
            <div class="content-header">
                <h2>Old Backup Sync Flow</h2>
                <p>Simple backup monitoring for individual connection synchronization</p>
            </div>
            
            <div class="flow-description">
                <h4>Overview</h4>
                <p>The old backup sync flow provides basic monitoring for individual connection synchronization. It sets up a backup cron job that monitors the sync progress and can resume or restart the sync if it gets stuck. This approach focuses on monitoring a single connection at a time.</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">WooCommerce Product Sync - Simple Backup Sync Flow</div>
                <img src="old backup sync flow.png" alt="Old Backup Sync Flow Diagram">
            </div>

            <div class="flow-description">
                <h4>Process Flow</h4>
                <p>• <strong>Backup Setup:</strong> Sync Manager sets up backup monitoring for individual connection<br>
                • <strong>Cron Scheduling:</strong> WordPress schedules backup cron to run every few minutes<br>
                • <strong>Status Monitoring:</strong> Backup cron checks sync status and batch analytics<br>
                • <strong>Issue Detection:</strong> Detects if sync is stuck or needs attention<br>
                • <strong>Recovery Action:</strong> Resumes sync or schedules next batch if needed<br>
                • <strong>Completion Handling:</strong> Clears backup cron when sync completes</p>
            </div>

            <div class="flow-description">
                <h4>Key Characteristics</h4>
                <p>• <strong>Connection-focused:</strong> Monitors single connection sync progress<br>
                • <strong>Basic Recovery:</strong> Simple resume/restart mechanisms<br>
                • <strong>Periodic Monitoring:</strong> Runs backup checks every few minutes<br>
                • <strong>Manual Intervention:</strong> May require manual handling for complex issues<br>
                • <strong>Limited Scope:</strong> Only handles one connection at a time</p>
            </div>
        </div>

        <!-- New Backup Flow Tab -->
        <div id="new-backup" class="tab-content">
            <div class="content-header">
                <h2>New Backup Sync Flow</h2>
                <p>Advanced backup monitoring for supplier-level synchronization with connection management</p>
            </div>
            
            <div class="flow-description">
                <h4>Overview</h4>
                <p>The new backup sync flow provides comprehensive monitoring for supplier-level synchronization. It includes both supplier-level and connection-level backup monitoring, allowing the system to track progress across multiple connections and automatically handle transitions between connections based on priority.</p>
            </div>

            <div class="diagram-container">
                <div class="diagram-title">WooCommerce Supplier Sync - Simple Backup Sync Flow</div>
                <img src="new backup sync flow.png" alt="New Backup Sync Flow Diagram">
            </div>

            <div class="flow-description">
                <h4>Process Flow</h4>
                <p>• <strong>Supplier Backup Setup:</strong> Supplier Manager sets up backup monitoring for entire supplier<br>
                • <strong>Multi-level Monitoring:</strong> Monitors both supplier progress and individual connections<br>
                • <strong>Connection Status Tracking:</strong> Tracks status of all connections (Connection1, Connection2, Connection3)<br>
                • <strong>Priority-based Transitions:</strong> Automatically moves to next priority connection when current completes<br>
                • <strong>Enhanced Recovery:</strong> Can resume stuck connections or restart entire supplier sync<br>
                • <strong>Connection-level Backup:</strong> Individual connection monitoring with batch-level recovery</p>
            </div>

            <div class="flow-description">
                <h4>Key Characteristics</h4>
                <p>• <strong>Supplier-focused:</strong> Monitors entire supplier sync progress across multiple connections<br>
                • <strong>Multi-level Recovery:</strong> Both supplier-level and connection-level recovery mechanisms<br>
                • <strong>Automatic Coordination:</strong> Handles transitions between connections automatically<br>
                • <strong>Priority Management:</strong> Respects connection priorities during recovery<br>
                • <strong>Comprehensive Monitoring:</strong> Tracks progress at both supplier and connection levels<br>
                • <strong>Enhanced Hooks:</strong> More backup-related hooks for customization</p>
            </div>

            <div class="flow-description">
                <h4>Available Backup Hooks</h4>
                <p>• <strong>mo_wcps_supplier_sync_backup_cron:</strong> Supplier backup monitoring cron hook<br>
                • <strong>mo_wcps_connection_sync_backup_cron:</strong> Connection backup monitoring cron hook<br>
                • <strong>mo_wcps_connection_completed:</strong> Called when connection sync completes<br>
                • <strong>mo_wcps_supplier_sync_completed:</strong> Called when all connections complete</p>
            </div>
        </div>

        <!-- Comparison Tab -->
        <div id="comparison" class="tab-content">
            <div class="content-header">
                <h2>Key Differences Analysis</h2>
                <p>Comprehensive comparison between connection-centric vs supplier-centric approaches</p>
            </div>

            <div class="comparison-grid">
                <div class="comparison-item">
                    <h3>Old Approach: Connection-Centric</h3>
                    <ul>
                        <li>Each API = Separate connection</li>
                        <li>Manual sync for each connection</li>
                        <li>Individual scheduling required</li>
                        <li>No relationship between connections</li>
                        <li>User must manage each connection</li>
                        <li>Time-consuming for multiple APIs</li>
                        <li>Error-prone manual coordination</li>
                        <li>Isolated monitoring per connection</li>
                        <li>Basic backup monitoring</li>
                        <li>Single-level recovery mechanisms</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h3>New Approach: Supplier-Centric</h3>
                    <ul>
                        <li>One supplier = Multiple connections</li>
                        <li>Single supplier sync operation</li>
                        <li>Automatic internal coordination</li>
                        <li>Priority-based connection processing</li>
                        <li>System manages all connections</li>
                        <li>Efficient for multiple APIs</li>
                        <li>Automated sequential processing</li>
                        <li>Unified supplier-level monitoring</li>
                        <li>Advanced multi-level backup monitoring</li>
                        <li>Enhanced recovery mechanisms</li>
                    </ul>
                </div>
            </div>

            <div class="key-differences">
                <h3>Key Improvements in New Approach</h3>
                <ul>
                    <li><strong>Simplified User Experience:</strong> One-click supplier sync instead of managing multiple connections</li>
                    <li><strong>Automated Coordination:</strong> System handles connection sequencing internally</li>
                    <li><strong>Priority Management:</strong> Intelligent processing order based on connection priorities</li>
                    <li><strong>Reduced Manual Work:</strong> No need to schedule and monitor each connection separately</li>
                    <li><strong>Better Organization:</strong> Logical grouping of related connections under suppliers</li>
                    <li><strong>Enhanced Reliability:</strong> Automated error handling and recovery mechanisms</li>
                    <li><strong>Scalability:</strong> Easy to add new connections without changing user workflow</li>
                    <li><strong>Unified Monitoring:</strong> Single dashboard for entire supplier sync progress</li>
                    <li><strong>Advanced Backup System:</strong> Multi-level backup monitoring (supplier + connection levels)</li>
                    <li><strong>Intelligent Recovery:</strong> Automatic transition between connections during recovery</li>
                </ul>
            </div>

            <div class="flow-description">
                <h4>Backup Flow Improvements</h4>
                <p><strong>Old Backup Approach:</strong> Simple connection-level monitoring with basic recovery mechanisms. Only monitors one connection at a time and may require manual intervention for complex issues.</p>
                <p><strong>New Backup Approach:</strong> Comprehensive multi-level monitoring system that tracks both supplier progress and individual connection status. Automatically handles transitions between connections, respects priority order during recovery, and provides enhanced hooks for customization.</p>
            </div>

            <div class="flow-description">
                <h4>Migration Benefits</h4>
                <p>The new supplier-centric approach transforms the user experience from managing multiple isolated connections to managing logical supplier groups. This reduces manual work, improves reliability, and provides better scalability for suppliers with multiple API connections. The automated internal coordination ensures efficient processing while maintaining the flexibility to prioritize critical connections. The enhanced backup system provides better monitoring and recovery capabilities across the entire supplier sync process.</p>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Add smooth scrolling for better UX
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html> 